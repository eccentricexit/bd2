--
-- File generated with SQLiteStudio v3.1.1 on qua mai 10 21:54:37 2017
--
-- Text encoding used: System
--
PRAGMA foreign_keys = off;
BEGIN TRANSACTION;

-- Table: AUTOR
DROP TABLE IF EXISTS AUTOR;
CREATE TABLE AUTOR (ID_AUTOR INTEGER PRIMARY KEY, NOME VARCHAR (100), NACIONALIDADE VARCHAR (100));
INSERT INTO AUTOR (ID_AUTOR, NOME, NACIONALIDADE) VALUES (1, 'Megan Maxwell', 'EUA');
INSERT INTO AUTOR (ID_AUTOR, NOME, NACIONALIDADE) VALUES (2, 'Jojo Moyses', 'EUA');
INSERT INTO AUTOR (ID_AUTOR, NOME, NACIONALIDADE) VALUES (3, 'Kathy Sierra', 'EUA');
INSERT INTO AUTOR (ID_AUTOR, NOME, NACIONALIDADE) VALUES (4, 'Eduardo Bezerra', 'Brasil');
INSERT INTO AUTOR (ID_AUTOR, NOME, NACIONALIDADE) VALUES (5, 'Anthony Burgess', 'EUA');
INSERT INTO AUTOR (ID_AUTOR, NOME, NACIONALIDADE) VALUES (6, 'Rita Lobo', 'Brasil');

-- Table: AUTOR_LIVRO
DROP TABLE IF EXISTS AUTOR_LIVRO;
CREATE TABLE AUTOR_LIVRO (ID_AUTOR INTEGER REFERENCES AUTOR (ID_AUTOR), COD_LIVRO INTEGER REFERENCES LIVRO (COD_LIVRO));
INSERT INTO AUTOR_LIVRO (ID_AUTOR, COD_LIVRO) VALUES (3, 6);
INSERT INTO AUTOR_LIVRO (ID_AUTOR, COD_LIVRO) VALUES (5, 4);
INSERT INTO AUTOR_LIVRO (ID_AUTOR, COD_LIVRO) VALUES (4, 5);
INSERT INTO AUTOR_LIVRO (ID_AUTOR, COD_LIVRO) VALUES (6, 1);
INSERT INTO AUTOR_LIVRO (ID_AUTOR, COD_LIVRO) VALUES (2, 2);
INSERT INTO AUTOR_LIVRO (ID_AUTOR, COD_LIVRO) VALUES (2, 3);

-- Table: CATEGORIA
DROP TABLE IF EXISTS CATEGORIA;
CREATE TABLE CATEGORIA (ID_CATEGORIA INTEGER PRIMARY KEY, NOME VARCHAR (50));
INSERT INTO CATEGORIA (ID_CATEGORIA, NOME) VALUES (1, 'Culinária');
INSERT INTO CATEGORIA (ID_CATEGORIA, NOME) VALUES (2, 'Ficção');
INSERT INTO CATEGORIA (ID_CATEGORIA, NOME) VALUES (3, 'Informática');
INSERT INTO CATEGORIA (ID_CATEGORIA, NOME) VALUES (4, 'Romance');

-- Table: EMPRESTIMO
DROP TABLE IF EXISTS EMPRESTIMO;
CREATE TABLE EMPRESTIMO (ID_EMPRESTIMO INTEGER PRIMARY KEY, DATA_EMPRESTIMO DATE, DATA_DEVOLUCAO DATE, ID_USR INTEGER REFERENCES USUARIO (ID_USR), COD_LIVRO INTEGER REFERENCES LIVRO (COD_LIVRO));
INSERT INTO EMPRESTIMO (ID_EMPRESTIMO, DATA_EMPRESTIMO, DATA_DEVOLUCAO, ID_USR, COD_LIVRO) VALUES (1, '10/01/2017', '15/01/2017', 6, 2);
INSERT INTO EMPRESTIMO (ID_EMPRESTIMO, DATA_EMPRESTIMO, DATA_DEVOLUCAO, ID_USR, COD_LIVRO) VALUES (2, '10/01/2017', '15/01/2017', 6, 4);
INSERT INTO EMPRESTIMO (ID_EMPRESTIMO, DATA_EMPRESTIMO, DATA_DEVOLUCAO, ID_USR, COD_LIVRO) VALUES (3, '05/05/2017', NULL, 5, 2);
INSERT INTO EMPRESTIMO (ID_EMPRESTIMO, DATA_EMPRESTIMO, DATA_DEVOLUCAO, ID_USR, COD_LIVRO) VALUES (4, '10/02/2017', '15/02/2017', 3, 6);
INSERT INTO EMPRESTIMO (ID_EMPRESTIMO, DATA_EMPRESTIMO, DATA_DEVOLUCAO, ID_USR, COD_LIVRO) VALUES (5, '25/01/2017', '30/01/2017', 2, 1);
INSERT INTO EMPRESTIMO (ID_EMPRESTIMO, DATA_EMPRESTIMO, DATA_DEVOLUCAO, ID_USR, COD_LIVRO) VALUES (6, '15/01/2017', '20/01/2017', 4, 5);

-- Table: LIVRO
DROP TABLE IF EXISTS LIVRO;
CREATE TABLE LIVRO (COD_LIVRO INTEGER PRIMARY KEY, EDITORA VARCHAR (100), TITULO VARCHAR (100), ANO_PUBLICACAO INTEGER, ID_CATEGORIA REFERENCES CATEGORIA (ID_CATEGORIA));
INSERT INTO LIVRO (COD_LIVRO, EDITORA, TITULO, ANO_PUBLICACAO, ID_CATEGORIA) VALUES (1, 'SENAC', 'Panelinha', 2016, 1);
INSERT INTO LIVRO (COD_LIVRO, EDITORA, TITULO, ANO_PUBLICACAO, ID_CATEGORIA) VALUES (2, 'intriseca', 'Depois de Você', 2014, 4);
INSERT INTO LIVRO (COD_LIVRO, EDITORA, TITULO, ANO_PUBLICACAO, ID_CATEGORIA) VALUES (3, 'intriseca', 'A garota que você deixou para trás', 2015, 4);
INSERT INTO LIVRO (COD_LIVRO, EDITORA, TITULO, ANO_PUBLICACAO, ID_CATEGORIA) VALUES (4, 'aleph', 'Laranja Mecânica', 1970, 2);
INSERT INTO LIVRO (COD_LIVRO, EDITORA, TITULO, ANO_PUBLICACAO, ID_CATEGORIA) VALUES (5, 'Elsevier', 'UML', 2014, 3);
INSERT INTO LIVRO (COD_LIVRO, EDITORA, TITULO, ANO_PUBLICACAO, ID_CATEGORIA) VALUES (6, 'Alta Books', 'Use a Cabeça Java', 2010, 3);

-- Table: USUARIO
DROP TABLE IF EXISTS USUARIO;
CREATE TABLE USUARIO (ID_USR INTEGER PRIMARY KEY, NOME VARCHAR (100), SEXO VARCHAR (1), DATA_NASCIMENTO VARCHAR (30), CPF VARCHAR (50));
INSERT INTO USUARIO (ID_USR, NOME, SEXO, DATA_NASCIMENTO, CPF) VALUES (1, 'Bruno', 'M', '25/05/1989', '6060');
INSERT INTO USUARIO (ID_USR, NOME, SEXO, DATA_NASCIMENTO, CPF) VALUES (2, 'Regina', 'F', '10/10/1999', '5050');
INSERT INTO USUARIO (ID_USR, NOME, SEXO, DATA_NASCIMENTO, CPF) VALUES (3, 'Sara', 'F', '07/05/2000', '4040');
INSERT INTO USUARIO (ID_USR, NOME, SEXO, DATA_NASCIMENTO, CPF) VALUES (4, 'Vitória', 'F', '20/02/1949', '3030');
INSERT INTO USUARIO (ID_USR, NOME, SEXO, DATA_NASCIMENTO, CPF) VALUES (5, 'Alice', 'F', '25/08/1983', '2020');
INSERT INTO USUARIO (ID_USR, NOME, SEXO, DATA_NASCIMENTO, CPF) VALUES (6, 'Pedro', 'M', '08/10/1981', '1010');

COMMIT TRANSACTION;
PRAGMA foreign_keys = on;

--Exe 03, Aula 2
/*a)Listar o nome de todos autores que tenham a letra A ou a em qualquer posição do nome.*/
SELECT * FROM AUTOR A WHERE A.NOME LIKE '%A%' OR A.NOME LIKE '%a%'

/*b)Listar todos os empréstimos realizados no mês de janeiro.*/
SELECT * FROM EMPRESTIMO E WHERE E.DATA_EMPRESTIMO LIKE '%/01%'

/*c)Listar todos os empréstimos que foram devolvidos no mês de fevereiro.*/
SELECT * FROM EMPRESTIMO E WHERE E.DATA_DEVOLUCAO LIKE '%/02/%'

/*d)Listar editora e título de todos os livros publicados em 2014 ou que sejam da editora intrínseca.*/
SELECT EDITORA,TITULO FROM LIVRO L WHERE ANO_PUBLICACAO = 2014 OR EDITORA = 'intriseca'

/*e)Listar nome e sexo dos usuários que nasceram em anos com final 9.*/
SELECT NOME, SEXO FROM USUARIO WHERE DATA_NASCIMENTO LIKE '__/__/___9'

/*f)Listar editora, título e ano de publicação dos livros que tenham ‘ra’ no meio do título.*/
SELECT EDITORA, TITULO, ANO_PUBLICACAO FROM LIVRO WHERE TITULO LIKE '%_ra_%'

/*g)Listar todos autores brasileiros.*/
SELECT * FROM AUTOR WHERE NACIONALIDADE = 'Brasil'

/*h)Listar todos autores que sejam dos EUA e tenham ‘o’ no meio do nome.*/
SELECT * FROM AUTOR A WHERE NACIONALIDADE = 'EUA' AND NOME LIKE '%_o_%'

/*i)Listar nome, sexo e data de nascimento de todos usuários que sejam nascidos no mês de outubro e sejam do sexo feminino.*/
SELECT NOME, SEXO, DATA_NASCIMENTO FROM USUARIO WHERE DATA_NASCIMENTO LIKE '__/10/%' AND SEXO = 'F'